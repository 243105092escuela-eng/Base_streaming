<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>AnimeStream Test</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; padding: 20px; }
        .card { border: 1px solid #ff4500; cursor: pointer; padding: 10px; background: #111; }
        .card img { width: 100%; height: auto; }
        #player { width: 80%; height: 450px; margin: 20px auto; border: 2px solid #ff4500; }
    </style>
</head>
<body>
    <h1>ANIME STREAM</h1>
    <div id="player-container">
        <iframe id="main-video" width="100%" height="100%" src="" frameborder="0" allowfullscreen></iframe>
    </div>

    <div id="anime-list" class="grid">
        </div>

    <script>
        // DATOS DE RESPALDO (Si el JSON falla, cargarÃ¡ estos)
        const backupData = [
            {
                "titulo": "Chainsaw Man",
                "poster": "https://www.crunchyroll.com/imgsrv/display/thumbnail/480x720/catalog/crunchyroll/922742d10348d4b3f025fbc0734005ba.jpe",
                "videoUrl": "https://www.youtube.com/embed/v4yLeN6G69s"
            }
        ];

        async function cargar() {
            const list = document.getElementById('anime-list');
            try {
                // Intentamos traer tu JSON
                const res = await fetch('db.json');
                const data = res.ok ? await res.json() : backupData;

                list.innerHTML = "";
                data.forEach(anime => {
                    const item = document.createElement('div');
                    item.className = 'card';
                    item.innerHTML = `<img src="${anime.poster}"><h3>${anime.titulo}</h3>`;
                    item.onclick = () => {
                        document.getElementById('main-video').src = anime.videoUrl;
                    };
                    list.appendChild(item);
                });
            } catch (e) {
                list.innerHTML = "Error al conectar con la base de datos.";
            }
        }
        window.onload = cargar;
    </script>
</body>
</html>
